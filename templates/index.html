<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Передача параметров работ</title>
  <link rel="stylesheet" href="{{ url_for('static', path='css/style.css') }}">
</head>
<body>
  <header>
    <h1>Параметры работ</h1>
    <p>Заполните форму и отправьте данные на сервер. Поля с * обязательны.</p>
  </header>

  <div class="container">
    <form id="workForm" novalidate>
      <div class="grid" aria-label="Основные параметры">
        <!-- Поля формы, как в предыдущем примере -->
        <div class="field third">
          <label for="productType">Тип продукции *</label>
          <input id="productType" name="productType" list="productTypeList" required placeholder="Напр.: РД, Спецификация, Лот" />
          <datalist id="productTypeList">
            {% for type_product in type_products %}
             <option value="{{ type_product }}">{{type_product}}</option>
            {% endfor %}
          </datalist>
        </div>

        <div class="field third">
          <label for="project">Проект *</label>
          <input id="project" name="project" required placeholder="Напр.: АЭС Руппур" />
        </div>

        <div class="field third">
          <label for="department">Подразделение *</label>
          <input id="department" name="department" required placeholder="Напр.: Отдел технологического оборудования" />
        </div>

        <div class="field full">
          <label for="standardName">Название норматива</label>
          <input id="standardName" name="standardName" placeholder="Напр.: Чертежи трубопроводов и опор. На базе 3D-модели" />
        </div>

        <div class="field third">
          <label for="docKind1">Вид документа</label>
          <input id="docKind1" name="docKind1" list="docKindList" placeholder="Напр.: Архитектурные чертежи" />
        </div>

        <div class="field third">
          <label for="docType">Тип документации</label>
          <input id="docType" name="docType" list="docTypeList" placeholder="Напр.: ТП, РД, (П, Пр, О)ООБ, Отчет" />
          <datalist id="docTypeList">
          </datalist>
        </div>

        <div class="field third">
          <label for="docKind2">Видопредставление документа</label>
          <input id="docKind2" name="docKind2" placeholder="Текстовый, графический, табличный и т.п. " />
        </div>

        <div class="field third">
          <label for="workStatus">Статус работы *</label>
          <select id="workStatus" name="workStatus" required>
            <option value="" disabled selected>Выберите статус</option>
            <option>Ожидание</option>
			<option>Запланировано</option>
            <option>В работе</option>
            <option>Выполнено</option>
            <option>Аннулировано</option>
          </select>
        </div>

        <div class="field third">
          <label for="workType">Тип работы *</label>
          <input id="workType" name="workType" list="workTypeList" required placeholder="Напр.: Разработка, Сопровождение передачи" />
          <datalist id="workTypeList">
            <option value="Разработка"></option>
            <option value="Рассмотрение и согласование входящей документации"></option>
            <option value="Рассмотрение и согласование документации смежных подразделений"></option>
            <option value="Сопровождение передачи внешнему заказчику"></option>
            <option value="Сопровождение передачи внутреннему заказчику"></option>
          </datalist>
        </div>

        <div class="field third">
          <label for="specialty">Специальность *</label>
          <input id="specialty" name="specialty" required placeholder="Напр.: Электрические специальности, Инженерные изыскания" />
        </div>

        <div class="field quarter">
          <label for="plannedEffort">Плановые трудозатраты (часы) *</label>
          <input id="plannedEffort" name="plannedEffort" type="number" inputmode="decimal" min="0" step="0.25" required placeholder="0" />
        </div>

        <div class="field quarter">
          <label for="actualEffort">Фактические трудозатраты (часы)</label>
          <input id="actualEffort" name="actualEffort" type="number" inputmode="decimal" min="0" step="0.25" placeholder="0" />
        </div>

        <div class="field quarter">
          <label for="operationalEffort">Трудозатраты по оперативным планам (часы)</label>
          <input id="operationalEffort" name="operationalEffort" type="number" inputmode="decimal" min="0" step="0.25" placeholder="0" />
        </div>

        <div class="field quarter">
          <label for="normativeEffort">Нормативные трудозатраты (часы)</label>
          <input id="normativeEffort" name="normativeEffort" type="number" inputmode="decimal" min="0" step="0.25" placeholder="0" />
        </div>

        <div class="field third">
          <label for="workCost">Стоимость работы (в руб.)</label>
          <input id="workCost" name="workCost" type="number" inputmode="decimal" min="0" step="0.01" placeholder="0.00" />
        </div>

        <div class="field full">
          <label for="comment">Комментарий</label>
          <textarea id="comment" name="comment" placeholder="Любые дополнительные детали"></textarea>
        </div>
      </div>

      <div class="actions">
        <button type="button" class="ghost" id="previewBtn">Предпросмотр JSON</button>
        <button type="submit" class="primary">Отправить на сервер</button>
        <button type="button" class="neutral" id="saveDraftBtn">Сохранить черновик</button>
        <button type="button" class="danger" id="clearBtn">Очистить форму</button>
        <div class="status" aria-live="polite">
          <span class="pill" id="autosaveState">Автосохранение включено</span>
          <span id="serverState"></span>
        </div>
      </div>
    </form>

    <div class="panel">
      <strong>JSON-предпросмотр</strong>
      <pre id="preview" tabindex="0" aria-label="Предпросмотр JSON"></pre>
      <div style="margin-top:10px; display:flex; gap:10px; flex-wrap: wrap;">
        <button type="button" class="ghost" id="copyJsonBtn">Скопировать JSON</button>
        <button type="button" class="neutral" id="loadDraftBtn">Загрузить черновик</button>
      </div>
    </div>
  </div>

  <div class="toast" id="toast" role="status" aria-live="assertive"></div>

  <script src="{{ url_for('static', path='js/config.js') }}"></script>
  <script src="{{ url_for('static', path='js/script.js') }}"></script>
</body>
</html>
